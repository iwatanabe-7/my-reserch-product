# my-research-product
研究のプログラム

仮想環境 anaconda
```
conda activate openmmlab
```
https://mmpose.readthedocs.io/en/latest/installation.html


mmpose キーポイント
https://mmpose.readthedocs.io/zh-cn/dev-1.x/dataset_zoo/2d_wholebody_keypoint.html


プログラム
movie-cut.py
動画を毎フレームごとに動画にする

542

## todo
焦点距離を求めます。

手足のほうをどうするか→スライド
欠損陳の求め方
もっとはっきりという
どれだけ認識がうまくいくのか

二次元だけど三次元で認識できたら、いろんな方向からの動画ができる

三次元化の一つの手段としてパペットを用いる


実験をして

## 2D-3D.py
三次元のパペットモデルの座標を二次元に変換し、目標の二次元座標に近づけるように最適化する。
最適化したものをプロットし、結果を表示する。出力をtxtファイルに保存する場合は -o コマンドを使用する。

### 最適化関数の選定
minimize関数のBFGS法を使用
最適化手法が単純な「Nelder-Mead」法であり、回転や平行移動などの複雑な非線形問題には適していない　局所最適解に陥りやすく、また収束が遅い

chatgpt より
勾配情報を使わない
fmin (Nelder-Mead) は勾配を使わないため、曲率が強い問題や最適化の方向がはっきりしている問題では、効率が悪い。
局所最適解に陥りやすい
Nelder-Mead はグローバルな探索を行わず、局所的な改善しか行わないため、複雑な関数では良い解を見つけにくい。
制約処理ができない:
Nelder-Mead は制約を扱う機能がなく、パラメータの範囲などの制約を考慮しない最適化しか行えません。

### 最適化の結果

# カメラパラメータ(px)
fx = 2805.78
fy = 2802.63
cx = 2026.51
cy = 1496.88

# パペットモデルの座標(cm)
puppet_uv = np.array([
    [-17.5, -35.0, 1],
    [17.5, -35.0, 1],
    [-11.5, 0.0, 1],
    [11.5, 0.0, 1]
])

# mmpose キーポイント(px)
mmpose_xyz = np.array([
    [672.51, 1216.56], 
    [479.45, 1219.49],
    [634.48, 1485.67], 
    [523.33, 1485.67],
])
